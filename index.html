<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador</title>
   <style>
     

*,*{
     margin: 0;
     padding: 0;
     scroll-behavior: smooth;
 }
 
 :root{
     --btn-celeste-color: rgb(145, 255, 239);
     --btn-verde-color: #52e7b5;
     --morado-color: rgb(173, 71, 71);
 }
 
 /* Estilos por defecto (modo claro) */
 body {
     background-color: rgb(214, 212, 212);
     overflow-x: hidden;
     font-family: monospace;
     transition: .3s linear;
   }
   
   /* Estilos para el modo oscuro */
   body.dark-mode {
     background-color: rgb(20, 20, 20);
     overflow-x: hidden;
     font-family: monospace;
     transition: .3s linear;
   }
   
 
 /* Contenedor del botón */
 .dark-mode-toggle.modern { /*  Modo claro   */
     position: fixed;
     top: 15%;
     right: 2%;
    
     width: 30px;
     height: 30px;
     /* margin: 25px 0 10px 0; */
     background-color: rgb(228, 225, 225);
     border: 1px solid gray;
     border-radius: 10%;
     box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
     display: flex;
     align-items: center;
     justify-content: center;
     cursor: pointer;
     z-index: 70;
   }
   
   body.dark-mode .dark-mode-toggle.modern {
     background-color: transparent; /* Modo oscuro*/
     box-shadow: inset 0 0 1rem rgb(50, 50, 50), 0 0px .5rem .1rem rgb(67, 66, 66);
     transition: 0.3s linear;
   }
 
 
   .dark-mode-toggle.modern { /*  Modo claro   */
     
     box-shadow: 0 0 10px 1px rgba(54, 54, 54, 0.4);
     transition: 0.3s linear;
   }
 
   .dark-mode-toggle.modern:hover { /*  Modo claro   */
     transform: scale(.95);
     box-shadow: 0 2px 3px rgba(0, 0, 0, 0.4);
     transition: 0.3s linear;
   }
 
 
   body.dark-mode .dark-mode-toggle.modern:hover {
     transform: scale(.95);
     box-shadow:  0 0px .2rem .1rem rgb(57, 56, 56);
     transition: 0.3s linear;
   }
   
   
   /* Ícono dentro del botón */
   .icon {
     width: 15px;
     height: 15px;
    /*  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="%23FFD700"/></svg>') no-repeat center / contain; */
     background-color: rgb(20, 20, 20);
     border-radius: 50%;
     transition: 0.3s linear;
   }
 
 
   
   
   body.dark-mode .icon {
     filter: invert(1); 
     transition: 0.3s linear;
   }
 
 /* 
 .icon:hover{
     transform: scale(.9);
     transition: 0.3s linear;
 }
 
  
 
   body.dark-mode .icon:hover {
     transform: scale(.9);
     transition: 0.3s linear;
   }
  */
 
 
 .header{
     position: sticky;
     display: flex;
     flex-direction: column;
     justify-content: space-between;
     align-items: center;
     top: 0;
     z-index: 60;
     width: 100%;
    
     background-color: rgb(23, 23, 23);
     border-bottom: 2px solid gray;
   
     margin-top: 0;
 }
 
 h1{
    
     color: white;
     text-align: center;
     font-size: 35px;
     margin: 10px 0;
   
 }
 
 
 hr{
     border: 3px solid rgb(114, 221, 237);

 }
 
 .contenedor-total{
     display: flex;
     flex-direction: column;
     justify-content: center;
     align-items: center;
     margin-top: 50px;
    
     
 }
 
 
 .contenedor-botones{
     display: flex;
     flex-direction: column;
     align-items: center;
     
 }
 
 
 
 .vistaResultado{
 
     border-top: 2px dotted gray;
 }
 
 
 
 .custom-file {
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: space-around;
     gap: 0px; /* Espaciado entre el botón y el texto */
    font-size: 1px;
 }
 
 .custom-file input[type="file"] {
     display: none; /* Ocultar el input nativo */
 }
 
 .custom-file button, .btn-verde {
     padding: 8px 16px;
    /*  background-color: rgb(53, 176, 61);
     color: #fff; */
     border: 1px solid rgb(40, 98, 50);
     font-size: 28em;
     border-radius: 6px;
     cursor: pointer;
     margin: 10px 0;
     transition: .2s ease-in;
     /* box-shadow: inset 0 0 1rem rgb(45, 45, 45), 4px 4px 1rem .1rem rgb(78, 77, 77);
  */
     color: rgb(55, 55, 55);
     background-color: var(--btn-celeste-color);
     box-shadow: inset 0 0 1rem rgb(76, 76, 76), 4px 4px 1rem .1rem rgb(78, 77, 77);
     box-shadow: inset 0 0 .7rem rgb(27, 27, 27);
 }
 
 .custom-file button:hover, .btn-verde:hover {
     transform: scale(.98);
     background-color: rgb(151, 150, 150);
     box-shadow: 2px 2px .5rem .1rem rgb(78, 77, 77);
 }
 
 
 
  .custom-file button:nth-child(5), .custom-file button:nth-child(6),  .custom-file button:nth-child(7){
     width: calc(210em / 18);
     background-color: rgb(222, 222, 222);
     color: black;
     transition: .2s ease-in;
     box-shadow: inset 0 0 1rem rgb(109, 109, 109), 4px 4px 1rem .1rem rgb(78, 77, 77);
     font-size: 18em;
 }
 
 
 
 .contenedor-guardar-btns{
     display: flex;
     margin-bottom: 20px;
 }
 
 .guardar{
     display: inline-block;
     width: calc(220em / 20);
     background-color: rgb(222, 222, 222);
     color: black;
     padding: 6px;
     margin: 0 5px;
     transition: .2s ease-in;
     border-radius: 7px;
     box-shadow: inset 0 0 1rem rgb(109, 109, 109), 4px 4px 1rem .1rem rgb(78, 77, 77);
     font-size: 12em;
 }
 
 .guardar:hover{
     transform: scale(.98);
     background-color: rgb(151, 150, 150);
     box-shadow: 2px 2px .5rem .1rem rgb(78, 77, 77);
 }
 
 
 
 
 
 
 #regenerarTablaButton{
     background-color: rgb(145, 255, 239);
     box-shadow: inset 0 0 1rem rgb(62, 62, 62), 4px 4px 1rem .1rem rgb(78, 77, 77);
 }
 
 
 .visibility-hidden{
     visibility: hidden;
 }
 
 #ir-buscador{
     display: inline-block;
     text-decoration: none;
     font-size: 22px;
     color: rgb(221, 221, 221);
     background-color: rgb(25, 25, 25);
     padding: 8px 10px;
     border-radius: 5px;
     box-shadow: inset 0 0 .5rem gray, 0 0 1rem .1rem rgb(61, 60, 60);
     margin: 10px auto;
     transition: .2s ease-in;
 }
 
 #ir-buscador:hover{
     transform: scale(.97);
     background-color: red;
     box-shadow: inset 0 0 .5rem gray, 0 0 1rem .1rem white;
     transition: .2s ease-in;
 }
 
 
 
 .contenedor-tabla{
     
     width: 80%;
     height: 70vh;
     
  
   /*   padding-top: 0; */
     margin: 50px auto 100px auto;
    text-align: center;
 }
 
 
 .mostrar-nombre{
     display: inline-block;
     width: 200px;
     
    
     margin: 10px auto;
     font-size: 14px;
     color: rgb(208, 205, 205);
     background-color: rgb(38, 38, 38);
     border-bottom: 1px solid gray;
     padding: 7px;
     border-radius: 5px;
 }
 
 
 
 /* 
 
 .actualizar-buscador-btn{
     display: inline-block;
     padding: 8px 10px;
     background-color: rgb(53, 176, 61);
     color: white;
     font-family: monospace;
     font-size: 22px;
     
     margin: 20px auto;
     border-radius: 6px;
     cursor: pointer;
     margin: 10px 0;
     transition: .2s ease-in;
     box-shadow: inset 0 0 1rem rgb(45, 45, 45), 4px 4px 1rem .1rem rgb(78, 77, 77);
   
 
 }
 
 
 .actualizar-buscador-btn:hover{
     transform: scale(.98);
     background-color: rgb(151, 150, 150);
     box-shadow: 2px 2px .5rem .1rem rgb(78, 77, 77);
 }
  */
 
 
 
 
 
 
 
 
 #preview::-webkit-scrollbar {
     width: 10px; /* Ancho de la barra vertical */
     height: 10px; /* Altura de la barra horizontal */
     }
     
     /* Estilo del "track" (fondo de la barra) */
     #preview::-kit-scrollbar-track {
     background: rgb(76, 75, 75); /* Color del fondo */
     border-radius: 10px; /* Bordes redondeados */
     }
     
     /* Estilo del "thumb" (la parte que se mueve) */
     #preview::-webkit-scrollbar-thumb {
     background: rgb(173, 71, 71); /* Color del thumb */
    
     
     border-radius: 10px; /* Bordes redondeados */
     }
     
     /* Hover sobre el "thumb" */
     #preview::-webkit-scrollbar-thumb:hover {
     background: var(--btn-celeste-color); /* Cambiar color al pasar el mouse */
     }
     
 
 /* 
 .tabla-editable{
     font-size: 30px;
     text-align: center;
     color: rgb(234, 232, 232);
     margin: 40px 0;
  }
 
  */
 
 
     #preview {  /*  CONTENEDOR DE LA TABLA   */
         position: relative;
         
         width: 100%;
         margin: 20px auto;
         overflow-y: auto; /* Habilita el scroll vertical */
         max-height: 70vh; /* Define la altura máxima */
         border: 1px solid #ccc;
         box-shadow: 10px 0 1.5rem .3rem rgb(63, 63, 63);
     }
 
 
 
     table {
         border-collapse: collapse;
         width: 100%;
         table-layout: fixed; /* mantien ANCHO DE CELDAS FIJO  */
        
     }
 
 
 
 
 
     
     th, td {
        /*  border: 1px solid #000;
         padding: 8px; */
         text-align: left;
 
 
 
         width: 150px; 
         border: 2px solid rgb(114, 114, 114);
        overflow-x: scroll; 
         white-space: nowrap; 
         padding: 5px 10px;
     }
   
 
    th{
     
     position: sticky; /* Encabezados fijos */
     top: 0;
     text-align: center;
     z-index: 2;
 
     border-top: none;
     background-color: rgb(97, 96, 96);
     color: white; 
     cursor: text; 
     height: 40px;
     font-size: 20px;
     box-shadow: inset 0 0 1.3em rgb(46, 46, 46);
    }
 
 
 
 
 td{
     height: 80px;
     color: rgb(227, 227, 227);
     background-color: rgb(219, 219, 219);
     font-size: 16px;
     background-color: rgb(30, 30, 30);
 }
 
 
 
 th[contenteditable="true"]:focus {
     outline: 3px solid red;
     background-color: red;
     box-shadow: inset 0 0 1rem rgb(242, 241, 241);
     
 }
 
 
 
 
 
 
 
 
     th::-webkit-scrollbar {
         /*width: 15px;  Ancho de la barra vertical */
         height: 3.5px; /* Altura de la barra horizontal */
         }
         
         /* Estilo del "track" (fondo de la barra) */
         th::-webkit-scrollbar-track {
         background: rgb(76, 75, 75);  ; /* Color del fondo */
         border-radius: 10px; /* Bordes redondeados */
         }
         
         /* Estilo del "thumb" (la parte que se mueve) */
         th::-webkit-scrollbar-thumb {
         background: rgb(173, 71, 71); /* Color del thumb */
         border-radius: 10px; /* Bordes redondeados */
         }
         
         /* Hover sobre el "thumb" */
         th::-webkit-scrollbar-thumb:hover {
         background: var(--btn-celeste-color); /* Cambiar color al pasar el mouse */
         }
         
     
     
 
 
 /* Cambiar el ancho de la barra de desplazamiento */
 td::-webkit-scrollbar {
   
     height: 3.5px; /* Altura de la barra horizontal */
     }
     
     /* Estilo del "track" (fondo de la barra) */
     td::-webkit-scrollbar-track {
     background: rgb(76, 75, 75);   /* Color del fondo */
     border-radius: 10px; /* Bordes redondeados */
     }
     
     /* Estilo del "thumb" (la parte que se mueve) */
     td::-webkit-scrollbar-thumb {
     background: rgb(173, 71, 71); /* Color del thumb */
     border-radius: 10px; /* Bordes redondeados */
     transition: .3s ease-in;
     }
     
     /* Hover sobre el "thumb" */
     td::-webkit-scrollbar-thumb:hover {
     background: var(--btn-celeste-color); /* Cambiar color al pasar el mouse */
     }
   
 
   
 
 .display-none{
     display: none;
 }
 
 .display-inlineBlock{
     display: inline-block;
 }
 
 
 
 /*-----------------------      BUSCADOR    ...............................*/
 
 
 .map-section{
     width: 100%;
     height: auto;
     display: flex;
    
     margin-top: 70px;  
   
     
 }

 
 .seleccionar-campos{
     width: 70%;
     color: rgb(194, 193, 193);
     font-size: 18px;
     text-align: center;
     padding: 7px 15px;
     border: 1px solid gray;
     
     border-radius: 7px;
     
     margin: 20px 0;
 }
 
 
/* .map-section h2{
     font-size: 22px;
     background-color: rgb(173, 172, 172);
     border: 1px solid gray;
     border-radius: 5px;
     text-align: center;
     padding: 8px;
     color: rgb(39, 39, 39);
     
 } 
  */
   
 
 .cambiar-json{
     width: 50%;
 
     padding: 3px;
     background-color: transparent;
     border: none;
     margin: -20px auto 5px auto;
     font-weight: bolder;
     font-size: 14em;
     /*  border: 1px solid gray;
    visibility: hidden; */
    font-family: monospace;
    color: red;
    visibility: hidden;
    transition: .3s ease-in;
 }
 
 .visible{
     visibility: visible;
 }
 
 .custom-file-input {
     display: none;
   }
   
   .label-file {
     font-size: 16em;
     font-family: monospace;
     background-color: #4CAF50; /* Cambia el color de fondo */
     color: white;
     padding: 10px 20px;
     margin-bottom: 5px;
     border-radius: 5px;
     box-shadow: inset 0 0 1rem rgb(221, 255, 218);
     cursor: pointer;
     text-align: center;
     transition: .3s;
   }
   
   .label-file:hover {
     transform: scale(.99);
     background-color: #45a049; /* Efecto hover */
    
   }
   
 
 .disabled{
     font-size: 16em;
     font-family: monospace;
   
     color: white;
     padding: 10px 20px;
     margin-bottom: 5px;
     border-radius: 5px;
     
     
     text-align: center;
     transition: .3s;
     background-color: #2e402f; /* deshabilitado */
     box-shadow: inset 0 0 1rem rgb(131, 131, 131);
 }
 
 
 
 
 
 .map-container{
 background: linear-gradient(45deg, rgb(25, 25, 25)0, rgb(28, 28, 28) 70%);
 width: 300px;
 /* margin: 100px auto; */
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: space-between;
 text-align: center;
 padding: 10px 0;
 border-radius: 10px;
 font-size: 1px;
 box-shadow: 10px 10px 2rem .7rem rgb(64, 63, 63);
 }
 
 .web-link{
 text-align: left;
 padding-left: 20px;
 padding-bottom: 30px;
 }
 
 
 .web-link .a{
 display: inline-block;
 font-size: 14px;
 font-family: monospace;
 padding: 8px;
 text-decoration: none;
 background-color: gray;
 color: rgb(227, 224, 224);
 border-radius: 5px;
 box-shadow: inset 0px 0 1rem rgb(86, 85, 85), 3px -3px .5rem .3rem rgb(49, 48, 48);
 transition: .3s ease-in;
 }
 
 
 .web-link .a:hover{
 transform: scale(.95);
 box-shadow: inset 0px 0 1rem rgb(86, 85, 85), 1px -1px 1rem .1rem rgb(66, 65, 65);
 }
 
 
 
 
 /* -----------------  BARRA SCROLL APP  ------------------------ */
 ::-webkit-scrollbar {
     width: 8px; /* Ancho de la barra vertical */
     height: 3px; /* Altura de la barra horizontal */
     }
     
     /* Estilo del "track" (fondo de la barra) */
     ::-webkit-scrollbar-track {
     background: transparent; /* Color del fondo */
     border-radius: 10px; /* Bordes redondeados */
     }
     
     /* Estilo del "thumb" (la parte que se mueve) */
     ::-webkit-scrollbar-thumb {
     background: rgb(173, 71, 71); /* Color del thumb */
     border-radius: 10px; /* Bordes redondeados */
     }
 
 
 
 /* -----------------  BARRA SCROLL resultados de búsqueda  ------------------------ */
     .resultados::-webkit-scrollbar {
     width: 8px; /* Ancho de la barra vertical */
     height: 3px; /* Altura de la barra horizontal */
     }
     
     /* Estilo del "track" (fondo de la barra) */
     .resultados::-webkit-scrollbar-track {
     background: transparent; /* Color del fondo */
     border-radius: 10px; /* Bordes redondeados */
     }
     
     /* Estilo del "thumb" (la parte que se mueve) */
     .resultados::-webkit-scrollbar-thumb {
     background: rgb(173, 71, 71); /* Color del thumb */
     border-radius: 10px; /* Bordes redondeados */
     }
 
 
 
 .resultados{
     width: 280em;
     /* height: 300em; */
     height: auto;
     overflow-x: hidden;
     overflow-y: scroll;
     background-color: transparent;
     border-top: 2px solid rgb(42, 42, 42);
     border-bottom: 2px solid rgb(42, 42, 42);
     margin-bottom: 20em;
     box-shadow: inset 0 0 3rem rgb(14, 14, 14);
     
 }
 
 .bg-display{
     width: 280em;
     height: 400em;
     overflow-x: hidden;
     overflow-y: scroll;
     background-color: rgb(29, 34, 56);
     border-bottom: 2px solid rgb(54, 53, 53);
     margin-bottom: 20em;
     box-shadow: inset -1px 20px 1.5rem rgb(122, 132, 179);
 }
 
 .resultados h3, h4{
     width: 90%;
 
     text-align: left;
     color: rgb(165, 165, 165);
     font-size: 15em ;
     font-family: monospace;
     padding: 12px 8px;
    /*  border-bottom: 2em solid gray ; */
     border-radius: 3px;
     margin: 0em auto;
     background-color: transparent;
     transition: .3s ease-in;
 
     
 }
 
 
 .resultados h4{
     font-size: 10em;
     color: rgb(186, 185, 185);
     border-bottom: 2px solid gray ;
     margin-top: -10px;
 }
 
 
 
 
 
 .resultados h3:hover{
  color: rgb(255, 255, 255);
 
 }
 
 
 
 
 .container-resultados{
     
     width: 276em;
     height: auto;
     overflow-x: hidden;
     overflow-y: hidden;
     background-color: rgb(23, 23, 23);
     background: linear-gradient(270deg, rgb(23, 23, 23) 70%, rgb(52, 51, 51) 100%);
     margin: 0em auto 40em auto;
     padding: 30em 0em 30em 0em;
 
     display: flex;
     border-radius: 17em;
     box-shadow: inset 0 0 1rem rgb(0, 0, 0), 10em -5em 2rem .5rem rgb(78, 78, 78);
     flex-direction: column;
     align-items: center;
     font-size: 1px;
     z-index: 10;
 }
 
 .container-resultados h2{
     margin: 0 auto 1em auto;
     padding: 4px 15px;
     border: none;
 }
 
 
 .container-resultados a{
     text-decoration: none;
     font-size: 16em;
     font-weight: 100;
     color: rgb(221, 221, 221);
     background-color: rgb(25, 25, 25);
     padding: 6px 8px;
     border-radius: 4px;
     box-shadow: inset 0 0 .5rem gray;
     margin: 10px auto;
     transition: .2s ease-in;
 }
 
 .container-resultados a:hover{
    
     box-shadow: inset 0 0 .5rem gray, 0 0 1rem .1rem white;
     transition: .2s ease-in;
 }
 
 
 .buscador-vacio{
     width: 270px;
     text-align: center;
     display: block;
     padding: calc(16em / 14) calc(10em / 14);
     margin-bottom: calc(15em / 14);
     margin-left: 3.5px;
     font-size: 16em;
    
     background-color: var(--btn-celeste-color);
     box-shadow: inset 0 0 1.5rem rgb(194, 214, 250);
     box-shadow: inset 0 0 1rem rgb(13, 13, 13);
    
     border: 1px solid #5b5b5b;
     cursor: pointer;
    
     border-radius: calc(5em / 14);
     transition: .3s linear;
 } 
 
 
 .buscador-vacio:hover {
     color: #515151;
     background-color: rgb(255, 255, 255);
     box-shadow: 0 0 .1rem .1rem gray;
 }
 
 
 .buscador-vacio::placeholder{
     text-align: center;
     font-size: calc(17em / 16);;
     color: rgb(93, 92, 92);
     
 }
 
 
 
 .buscador-lleno{
     padding: calc(13em / 25) calc(18em / 25);
     
     font-size: 25em;
     color: #515151;
     background-color: rgb(219, 222, 222);
     box-shadow: inset 0 0 .7rem rgb(45, 45, 45);
     border: none;
 }
 
 mark{
     color: red;
     background-color: transparent;
     font-size: 1.2em;
     
 }
 
 
 
  
 .opciones-check{
     
     color: rgb(255, 255, 255);
     /* display: block; */
     font-size: 22em;
     transition: .2s;
     width: 95%;
     padding-left: 10px;
    
     display: flex;
     align-items: center;
     margin: 3px 0;
     font-family: monospace;
 }
 
 
 .opciones-check:hover{
     /* display: inline-block; */
    
     background-color: rgb(77, 76, 76);
 
 }
  
 
 
 
 
 
 
 
 
 .opciones-check input[type="checkbox"] {
     width: 1.8em;
     height: 1.8em;
     background-color: rgb(184, 179, 179); /* Fondo para estado sin marcar */
     border: 2px solid #333;
     box-shadow: inset 0 0 .4rem black;
     border-radius: 0.3em; /* Bordes redondeados */
     margin: 0.3em 0;
     margin-right: 1em;
     cursor: pointer;
     -webkit-appearance: none; /* Para navegadores WebKit */
     -moz-appearance: none; /* Para navegadores Gecko */
     appearance: none; /* Estilo predeterminado desactivado */
     position: relative; /* Necesario para usar ::after */
   }
 
 
   .opciones-check input[type="checkbox"]:checked {
     box-shadow: inset 0 0 .3rem rgb(249, 249, 249);
     background-color: red; /* Fondo para estado marcado */
    /*  border-color: #9b9999; */ /* Cambia el borde cuando está marcado */
   }
 
 
   .opciones-check input[type="checkbox"]:checked::after {
     content: "✔"; /* Icono o símbolo de tilde */
     font-size: 1em; /* Tamaño del tilde */
     color: #fff; /* Color del tilde */
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     font-weight: bold;
   }
 
 
 
   .opciones-check input[type="checkbox"]:hover {
     transform: scale(1.1);
     transition: 0.2s;
   }
 
 
   .contenedor-buscador-btns-resultados{
        background-color: red;
   }
 
   .establecer-campos-btn{
   
    margin: 30px auto;
     width: auto;
     padding: 5px 8px;
     display: block; 
   
     font-family: monospace;
     font-size: 22px;
     border: 1px solid gray;
     border-radius: 5px;
     color: #a3a2a2;
     background-color: #191919;
    
     visibility: hidden;
     z-index: 50;
     transition: .2s ease-in;
   }
 
 
   @keyframes AnimationBtn{
     0%{
         background-color: red;
          box-shadow: inset 0 0 1rem rgb(172, 168, 168);
         
     }
     50%{
         background-color: transparent;
     }
     100%{
         background-color: red;
          box-shadow: inset 0 0 1rem rgb(201, 196, 196);
     }
   }
 
 .animationBtn{
     
     animation: AnimationBtn 1.5s linear infinite;
 }
 
 .animationBtn:hover{
     
     animation-play-state: paused;
   
     background-image: linear-gradient(0deg, red 0%, red 100%);
    
     transform: scale(.97);
     color: rgb(223, 219, 219);
     box-shadow: inset 0 0 .5rem rgb(115, 114, 114), 0 0 .8rem .2rem rgb(235, 229, 217);
     box-shadow: inset 0 0 1rem rgb(201, 196, 196);
 }
 
 
 .invisible{
     visibility: hidden;
 }
 
 
 
 
   .display-none{
     display: none;
 }
   
 
   .camposFijados{
     color: #4CAF50;
     font-size: 16em;
     font-family: monospace;
     text-align: center;
   }
 
 
 
 
   @media  screen and (min-width: 850px) {
     .container-resultados{
         font-size: 1.5px;
     }
 
     
 
 
     .opciones-check input[type="checkbox"] {
         width: 2.5em;
         height: 2.5em;
     /*  accent-color: var(--btn-celeste-color); */ /* Cambiar el color del checkbox */
         accent-color: var(--morado-color);
         margin: .3em 0;
         margin-right: 1em;
         cursor: pointer;
     }
 
 
     .buscador-vacio{
         font-size: 15em;
       
         width: 18em;
     }
 
     .buscador-lleno{
         font-size: 15em;
         width: 18em;
     }

     .dark-mode-toggle.modern { /*  Modo claro   */
        
        top: 16%;
     
      
      }
 }
 
 
 
   
 
 @media  screen and (min-width: 1000px) {
     
 
     h1{
         font-size: 65px;
         margin-top: 10px;
     }
 
     .custom-file button, .btn-verde{
         font-size: 38em;
         border-radius: 10px;
     }
 
     #ir-buscador{
         font-size: 32px;
         margin-bottom: 60px;
     }
 
 
 
     .map-section{
         margin-top: 150px;
         text-align: center;
     }
 
 
     .seleccionar-campos{
         font-size: 28px;
     }
     
   .establecer-campos-btn{
     font-size: 32px;
   }
 }
 
   </style>
</head>



























































<body id="editor">
   <div class="header">
    
    
     <h1>BUSCADOR</h1> 
   </div>
    <!-- <button id="dark-mode-button"></button> -->
    <div class="dark-mode-toggle modern" id="dark-mode-toggle">
        <span class="icon"></span>
   </div>
   
    
    <div class="contenedor-total">   

        
                
      <!--.......................   EDITOR CSV    ....................-->
       <div id="editor" class="contenedor-botones">
            <div class="custom-file">
             
                
                 <input type="file" id="csvFile" accept=".csv" style="display:none" />
                <button id="cargar-CSV-Button" type="button" class="btn-verde">Cargar Archivo CSV</button>
                <button id="reload-btn" type="button" class="btn-verde display-none">Cambiar Archivo</button>
                <span id="fileName" class="mostrar-nombre display-none"></span>
                <button id="regenerarTablaButton" type="button" style="display: none;">Mostrar Tabla</button>


            </div>
            
       </div>
       
       <div id="contenedor-tabla" class="contenedor-tabla display-none">
            <a href="#container-resultados" id="ir-buscador" class="display-none">Ir al Buscador</a>
            <div id="preview"></div>
      </div>

      <!--.......................   BUSCADOR    ....................-->


      
 <section id="map-section" class="map-section display-none">
  
    <div id="container-resultados" class="container-resultados">
          
       
        
                <a href="#editor">Cambiar de Archivo</a>
            
                <div id="seleccionar-campos" class="seleccionar-campos">Seleccionar Campos de Búsqueda</div>
                <div id="fieldsContainer" class="fieldsContainer"></div>
                    
            
                <button id="fijarCampos" class="establecer-campos-btn animationBtn">Fijar Campos</button>
        




       <!--  BUSCADOR -->
         
                <div id="contenedor-inputBuscador">
                    <input type="search" id="buscador" style="opacity: 0.4" class="buscador-vacio" placeholder="Seleccionar Campos" disabled>
                </div>
                
                <div id="contenedor-guardar-btns" class="contenedor-guardar-btns display-none">
                    <button id="guardar-como-csv" class="guardar display-none"  onclick="guardarComoCSV()">Guardar Resultado como .csv</button>
                    <button id="guardar-como-json" class="guardar display-none" onclick="guardarComoJSON()">Guardar Resultado como .json</button>
                    
                </div>
                <div id="resultados" class="resultados"></div>
         

    </div>
  </section>


    </div>





























































    <script>




//  BIBLIOTECA---------------------------------------------------------------------


((e,t)=>{"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&"undefined"!=typeof exports?module.exports=t():e.Papa=t()})(this,function r(){var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{};var d,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},h=0,v={};function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(t,e){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let e=this._config.newline;e||(r=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,r)),t=[...t.split(e).slice(i)].join(e)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&void 0!==(r=this._config.beforeFirstChunk(t))&&(t=r),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,r=(this._partialLine="",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){t=r.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),r&&r.data&&(this._rowCount+=r.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview);if(a)n.postMessage({results:r,workerId:v.WORKER_ID,finished:i});else if(U(this._config.chunk)&&!e){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=r=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!i||!U(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(e){U(this._config.error)?this._config.error(e):a&&this._config.error&&n.postMessage({workerId:v.WORKER_ID,error:e,finished:!1})}}function f(e){var r;(e=e||{}).chunkSize||(e.chunkSize=v.RemoteChunkSize),u.call(this,e),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),s||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var e,t=this._config.downloadRequestHeaders;for(e in t)r.setRequestHeader(e,t[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,r.setRequestHeader("Range","bytes="+this._start+"-"+i));try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}s&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){e=r.statusText||e;this._sendError(new Error(e))}}function l(e){(e=e||{}).chunkSize||(e.chunkSize=v.LocalChunkSize),u.call(this,e);var i,r,n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((i=new FileReader).onload=y(this._chunkLoaded,this),i.onerror=y(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,t=(this._config.chunkSize&&(t=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,t)),i.readAsText(e,this._config.encoding));n||this._chunkLoaded({target:{result:t}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function c(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){var e,t;if(!this._finished)return e=this._config.chunkSize,i=e?(t=i.substring(0,e),i.substring(e)):(t=i,""),this._finished=!i,this.parseChunk(t)}}function p(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=y(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(m){var n,s,a,t,o=Math.pow(2,53),h=-o,u=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,d=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,i=this,r=0,f=0,l=!1,e=!1,c=[],p={data:[],errors:[],meta:{}};function y(e){return"greedy"===m.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function g(){if(p&&a&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),a=!1),m.skipEmptyLines&&(p.data=p.data.filter(function(e){return!y(e)})),_()){if(p)if(Array.isArray(p.data[0])){for(var e=0;_()&&e<p.data.length;e++)p.data[e].forEach(t);p.data.splice(0,1)}else p.data.forEach(t);function t(e,t){U(m.transformHeader)&&(e=m.transformHeader(e,t)),c.push(e)}}function i(e,t){for(var i=m.header?{}:[],r=0;r<e.length;r++){var n=r,s=e[r],s=((e,t)=>(e=>(m.dynamicTypingFunction&&void 0===m.dynamicTyping[e]&&(m.dynamicTyping[e]=m.dynamicTypingFunction(e)),!0===(m.dynamicTyping[e]||m.dynamicTyping)))(e)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&((e=>{if(u.test(e)){e=parseFloat(e);if(h<e&&e<o)return 1}})(t)?parseFloat(t):d.test(t)?new Date(t):""===t?null:t):t)(n=m.header?r>=c.length?"__parsed_extra":c[r]:n,s=m.transform?m.transform(s,n):s);"__parsed_extra"===n?(i[n]=i[n]||[],i[n].push(s)):i[n]=s}return m.header&&(r>c.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+c.length+" fields but parsed "+r,f+t):r<c.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+c.length+" fields but parsed "+r,f+t)),i}var r;p&&(m.header||m.dynamicTyping||m.transform)&&(r=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(i),r=p.data.length):p.data=i(p.data,0),m.header&&p.meta&&(p.meta.fields=c),f+=r)}function _(){return m.header&&0===c.length}function k(e,t,i,r){e={type:e,code:t,message:i};void 0!==r&&(e.row=r),p.errors.push(e)}U(m.step)&&(t=m.step,m.step=function(e){p=e,_()?g():(g(),0!==p.data.length&&(r+=e.data.length,m.preview&&r>m.preview?s.abort():(p.data=p.data[0],t(p,i))))}),this.parse=function(e,t,i){var r=m.quoteChar||'"',r=(m.newline||(m.newline=this.guessLineEndings(e,r)),a=!1,m.delimiter?U(m.delimiter)&&(m.delimiter=m.delimiter(e),p.meta.delimiter=m.delimiter):((r=((e,t,i,r,n)=>{var s,a,o,h;n=n||[",","\t","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var u=0;u<n.length;u++){for(var d,f=n[u],l=0,c=0,p=0,g=(o=void 0,new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e)),_=0;_<g.data.length;_++)i&&y(g.data[_])?p++:(d=g.data[_].length,c+=d,void 0===o?o=d:0<d&&(l+=Math.abs(d-o),o=d));0<g.data.length&&(c/=g.data.length-p),(void 0===a||l<=a)&&(void 0===h||h<c)&&1.99<c&&(a=l,s=f,h=c)}return{successful:!!(m.delimiter=s),bestDelimiter:s}})(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess)).successful?m.delimiter=r.bestDelimiter:(a=!0,m.delimiter=v.DefaultDelimiter),p.meta.delimiter=m.delimiter),w(m));return m.preview&&m.header&&r.preview++,n=e,s=new E(r),p=s.parse(n,t,i),g(),l?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,s.abort(),n=U(m.chunk)?"":n.substring(s.getCharIndex())},this.resume=function(){i.streamer._halted?(l=!1,i.streamer.parseChunk(n,!0)):setTimeout(i.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,s.abort(),p.meta.aborted=!0,U(m.complete)&&m.complete(p),n=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576);var t=new RegExp(P(t)+"([^]*?)"+P(t),"gm"),i=(e=e.replace(t,"")).split("\r"),t=e.split("\n"),e=1<t.length&&t[0].length<i[0].length;if(1===i.length||e)return"\n";for(var r=0,n=0;n<i.length;n++)"\n"===i[n][0]&&r++;return r>=i.length/2?"\r\n":"\r"}}function P(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(C){var S=(C=C||{}).delimiter,O=C.newline,x=C.comments,I=C.step,A=C.preview,T=C.fastMode,D=null,L=!1,F=null==C.quoteChar?'"':C.quoteChar,j=F;if(void 0!==C.escapeChar&&(j=C.escapeChar),("string"!=typeof S||-1<v.BAD_DELIMITERS.indexOf(S))&&(S=","),x===S)throw new Error("Comment character same as delimiter");!0===x?x="#":("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=!1),"\n"!==O&&"\r"!==O&&"\r\n"!==O&&(O="\n");var z=0,M=!1;this.parse=function(i,t,r){if("string"!=typeof i)throw new Error("Input must be a string");var n=i.length,e=S.length,s=O.length,a=x.length,o=U(I),h=[],u=[],d=[],f=z=0;if(!i)return b();if(T||!1!==T&&-1===i.indexOf(F)){for(var l=i.split(O),c=0;c<l.length;c++){if(d=l[c],z+=d.length,c!==l.length-1)z+=O.length;else if(r)return b();if(!x||d.substring(0,a)!==x){if(o){if(h=[],k(d.split(S)),R(),M)return b()}else k(d.split(S));if(A&&A<=c)return h=h.slice(0,A),b(!0)}}return b()}for(var p=i.indexOf(S,z),g=i.indexOf(O,z),_=new RegExp(P(j)+P(F),"g"),m=i.indexOf(F,z);;)if(i[z]===F)for(m=z,z++;;){if(-1===(m=i.indexOf(F,m+1)))return r||u.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:h.length,index:z}),E();if(m===n-1)return E(i.substring(z,m).replace(_,F));if(F===j&&i[m+1]===j)m++;else if(F===j||0===m||i[m-1]!==j){-1!==p&&p<m+1&&(p=i.indexOf(S,m+1));var y=v(-1===(g=-1!==g&&g<m+1?i.indexOf(O,m+1):g)?p:Math.min(p,g));if(i.substr(m+1+y,e)===S){d.push(i.substring(z,m).replace(_,F)),i[z=m+1+y+e]!==F&&(m=i.indexOf(F,z)),p=i.indexOf(S,z),g=i.indexOf(O,z);break}y=v(g);if(i.substring(m+1+y,m+1+y+s)===O){if(d.push(i.substring(z,m).replace(_,F)),w(m+1+y+s),p=i.indexOf(S,z),m=i.indexOf(F,z),o&&(R(),M))return b();if(A&&h.length>=A)return b(!0);break}u.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:h.length,index:z}),m++}}else if(x&&0===d.length&&i.substring(z,z+a)===x){if(-1===g)return b();z=g+s,g=i.indexOf(O,z),p=i.indexOf(S,z)}else if(-1!==p&&(p<g||-1===g))d.push(i.substring(z,p)),z=p+e,p=i.indexOf(S,z);else{if(-1===g)break;if(d.push(i.substring(z,g)),w(g+s),o&&(R(),M))return b();if(A&&h.length>=A)return b(!0)}return E();function k(e){h.push(e),f=z}function v(e){var t=0;return t=-1!==e&&(e=i.substring(m+1,e))&&""===e.trim()?e.length:t}function E(e){return r||(void 0===e&&(e=i.substring(z)),d.push(e),z=n,k(d),o&&R()),b()}function w(e){z=e,k(d),d=[],g=i.indexOf(O,z)}function b(e){if(C.header&&!t&&h.length&&!L){var s=h[0],a={},o=new Set(s);let n=!1;for(let r=0;r<s.length;r++){let i=s[r];if(a[i=U(C.transformHeader)?C.transformHeader(i,r):i]){let e,t=a[i];for(;e=i+"_"+t,t++,o.has(e););o.add(e),s[r]=e,a[i]++,n=!0,(D=null===D?{}:D)[e]=i}else a[i]=1,s[r]=i;o.add(i)}n&&console.warn("Duplicate headers found and renamed."),L=!0}return{data:h,errors:u,meta:{delimiter:S,linebreak:O,aborted:M,truncated:!!e,cursor:f+(t||0),renamedHeaders:D}}}function R(){I(b()),h=[],u=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return z}}function g(e){var t=e.data,i=o[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&_(t.workerId,t.results)}function _(e,t){var i=o[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete o[e]}function m(){throw new Error("Not implemented.")}function w(e){if("object"!=typeof e||null===e)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=w(e[t]);return i}function y(e,t){return function(){e.apply(t,arguments)}}function U(e){return"function"==typeof e}return v.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,!t.worker||!v.WORKERS_SUPPORTED)return i=null,v.NODE_STREAM_INPUT,"string"==typeof e?(e=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(e),i=new(t.download?f:c)(t)):!0===e.readable&&U(e.read)&&U(e.on)?i=new p(t):(n.File&&e instanceof File||e instanceof Object)&&(i=new l(t)),i.stream(e);(i=(()=>{var e;return!!v.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,t=r.toString();return v.BLOB_URL||(v.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",t,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=h++,o[e.id]=e)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},v.unparse=function(e,t){var n=!1,_=!0,m=",",y="\r\n",s='"',a=s+s,i=!1,r=null,o=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||v.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines),"string"==typeof t.newline&&(y=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(_=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s),t.escapeFormulae instanceof RegExp?o=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(o=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(s),"g"));"string"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if("object"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error("Unable to serialize unrecognized input");function u(e,t,i){var r="",n=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=k(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=(n?e:t[o]).length,u=!1,d=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u="greedy"===i?""===t[o].join("").trim():1===t[o].length&&0===t[o][0].length),"greedy"===i&&n){for(var f=[],l=0;l<h;l++){var c=s?e[l]:l;f.push(t[o][c])}u=""===f.join("").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!d&&(r+=m);var g=n&&s?e[p]:p;r+=k(t[o][g],p)}o<t.length-1&&(!i||0<h&&!d)&&(r+=y)}}return r}function k(e,t){var i,r;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(r=!1,o&&"string"==typeof e&&o.test(e)&&(e="'"+e,r=!0),i=e.toString().replace(h,a),(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1})(i,v.BAD_DELIMITERS)||-1<i.indexOf(m)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?s+i+s:i)}},v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="\ufeff",v.BAD_DELIMITERS=["\r","\n",'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!s&&!!n.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=E,v.ParserHandle=i,v.NetworkStreamer=f,v.FileStreamer=l,v.StringStreamer=c,v.ReadableStreamStreamer=p,n.jQuery&&((d=n.jQuery).fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!("INPUT"===d(this).prop("tagName").toUpperCase()&&"file"===d(this).attr("type").toLowerCase()&&n.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0===h.length)U(o.complete)&&o.complete();else{var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if("object"==typeof s){if("abort"===s.action)return e="AbortError",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if("skip"===s.action)return void u();"object"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if("skip"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u()},v.parse(n.file,n.instanceConfig)}}function u(){h.splice(0,1),e()}}),a&&(n.onmessage=function(e){e=e.data;void 0===v.WORKER_ID&&e&&(v.WORKER_ID=e.workerId);"string"==typeof e.input?n.postMessage({workerId:v.WORKER_ID,results:v.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=v.parse(e.input,e.config))&&n.postMessage({workerId:v.WORKER_ID,results:e,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(p.prototype=Object.create(u.prototype)).constructor=p,v});







//  FIN BIBLIOTECA----------------------------------------------------------------------











     const toggleDarkMode = () => {
          document.body.classList.toggle('dark-mode');
          const isDarkMode = document.body.classList.contains('dark-mode');
          localStorage.setItem('dark-mode', isDarkMode);
        };
        
        // Aplicar el modo oscuro si estaba habilitado anteriormente
        if (localStorage.getItem('dark-mode') === 'true') {
          document.body.classList.add('dark-mode');
        }
        
      
       /*  const buttonMode = document.getElementById('dark-mode-button'); */
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        darkModeToggle.addEventListener('click', toggleDarkMode);
      
      
      
      
      
      
      
      
      const fileInput = document.getElementById("csvFile");
      const fileNameElement = document.getElementById("fileName"),
      mapSection = document.getElementById("map-section");
      
      
      const contenedorTabla = document.getElementById("contenedor-tabla");
      const saveAsCsv = document.getElementById("guardar-como-csv"),
      saveAsJson = document.getElementById("guardar-como-json"),
      reloadBtn = document.getElementById("reload-btn"),
      cargarCSVButton = document.getElementById("cargar-CSV-Button");
      
      
      reloadBtn.addEventListener("click", function(){
          location.reload();  // recarga la página
      })
      
      
      function generarIds(json){
          return json.map((row, index)=>{
              if(!row.id){
                  row.id = `row-${index}`; // genera un id único si no existe
              }
              return row;
          });
      }
      
      
      
      
      function mostrarTablaEditable(json) {
        /*   
          console.trace("mostrarTablaEditable llamada. JSON actual:", json); */
      
          contenedorTabla.classList.remove("display-none");
      
          const tablaEditableTitulo = document.getElementById("tabla-editable-titulo"),
          irBuscador= document.getElementById("ir-buscador");
      
          /* tablaEditableTitulo.classList.remove("display-none"); */
          irBuscador.classList.remove("display-none");
      
          const previewDiv = document.getElementById("preview");
          previewDiv.innerHTML = ""; // Limpiar el contenido anterior
          let tableHTML = "<table>";
      
          // Encabezados de la tabla
          const headers = Object.keys(json[0]);/* .filter(key => key !== "id"); */
         
          tableHTML += "<thead><tr>";
         /* 
             PARA LLAMAR A FUNCION DE ELIMINAR FILA (traía problemas de rendimiento y se auto regeneraba la TABLA, 
             por eso la saqué)
         
          tableHTML += "<thead><tr><th>Acción</th>"; */
          headers.forEach(header => {
              /* tableHTML += `<th contenteditable="true" data-texto-anterior="${header}">${header}</th>`; */
              tableHTML += `<th>${header}</th>`;
          });
          tableHTML += "</tr></thead>";
      
          // Filas de datos
          tableHTML += "<tbody>";
          json.forEach(row => {
              tableHTML += "<tr>";
            /*   tableHTML += `<tr id="${row.id}">
                  <td><button onclick="deleteRow('${row.id}')">Eliminar</button></td>`; */
              headers.forEach(header => {
                  /* tableHTML += `<td contenteditable="true"  data-texto-anterior="${row[header]}">${row[header]}</td>`; */
                  tableHTML += `<td>${row[header]}</td>`;
              });
              tableHTML += "</tr>";
          });
          tableHTML += "</tbody></table>";
      
          previewDiv.innerHTML = tableHTML;
      
          
          // llamamos a la función para agregar confirmación
        //  agregarConfirmacionEncabezados(); 
         // agregarConfirmacionCeldas();
      
          
          const celdasEditables = document.querySelectorAll("td[contenteditable='true'], th[contenteditable='true']");
          
           
          
          celdasEditables.forEach(celda => {
              
              celda.addEventListener("blur", (event) => {
                   
                  const celdaActual = event.target;
                 /*  const textoAnterior = celdaActual.getAttribute("data-texto-anterior"); */
                  const textoActual = celdaActual.textContent;
      
             
                   // habilitamos botones de Guardar 
                  saveAsCsv.classList.remove("display-none");
                  saveAsJson.classList.remove("display-none"); 
                  
                  celdaActual.setAttribute("data-texto-anterior", textoActual);
                  actualizarBuscadorBtn.classList.remove("visibility-hidden"); 
      
                  
          
                  actualizarBuscadorBtn.addEventListener("click", () =>{
                      const json = capturarDatosEditados(); 
                      // pasamos el JSON al BUSCADOR
                      /* console.log(json); */
                      inicioBuscador(json); 
      
                      actualizarBuscadorBtn.classList.add("visibility-hidden");
                  });
                              
                 
              });
      
            
          });
      
      
      }
      
      
      
      
      
      function mostrarNombreArchivo(fileInput, fileNameElement) {
        
          if (fileInput.files.length > 0) { // si hay al menos 1 archivo CSV seleccionado
               // mostramos el nombre del archivo .csv
              fileNameElement.textContent = "archivo: " + fileInput.files[0].name;
         
          } else {
              fileNameElement.textContent = "No se ha seleccionado ningún archivo"; // Texto predeterminado
          }
       }
      
      
      
      
      
      
      
       function cargarCSV(fileInput, fileNameElement) {
          
          saveAsCsv.classList.add("display-none");
          saveAsJson.classList.add("display-none");
          // csv es el archivo CSV cargado
          const csv = fileInput.files[0];
        
          
          if (csv) { 
            /*   contenedorTabla.classList.remove("display-none");
              
              saveAsCsv.classList.remove("display-none");
              saveAsJson.classList.remove("display-none");
              // hacemos que se vea el nombre del archivo cargado
              fileNameElement.classList.remove("display-none"); */
              cargarCSVButton.classList.add("display-none");
              mostrarNombreArchivo(fileInput, fileNameElement);
              fileNameElement.classList.remove("display-none");
             
              reloadBtn.classList.add("btn-verde");
              reloadBtn.classList.remove("display-none");
              saveAsCsv.classList.remove("display-none");
              saveAsJson.classList.remove("display-none");
              
              return csv;
      
          } else {
              alert("Por favor, selecciona un archivo CSV.");
          } 
      
      }
      
      
      
      
      
      function convertidorCsvAJson(csv) {
          return new Promise((resolve, reject) => {
              Papa.parse(csv, {
                  header: true, // Usar encabezados en el CSV
                  skipEmptyLines: true, // Ignorar líneas vacías
                  complete: function (results) {
                      const jsonData = results.data; // guardamos los datos en formato JSON
                      resolve(jsonData); // Resolvemos la promesa con jsonData
                  },
                  error: function (err) {
                      reject(new Error("Error al cargar el archivo: " + err.message)); // Rechazamos la promesa si ocurre un error
                  },
              });
          });
      }
      
      
      
      
      /* 
      function agregarConfirmacionEncabezados() {
          const encabezados = document.querySelectorAll("th[contenteditable='true']");
          encabezados.forEach(th => {
              // Captura el texto original antes de editar
              th.addEventListener("focus", function() {
                  const textoActual = th.textContent.trim();
                  th.setAttribute("data-texto-anterior", textoActual);
              });
      
              // Mostrar confirmación al perder el foco
              th.addEventListener("blur", function() {
                  const nuevoNombre = th.textContent.trim(); // Capturar el nuevo texto
                  const textoAnterior = th.getAttribute("data-texto-anterior");
      
                  if (nuevoNombre !== textoAnterior) { // Solo confirmar si el texto cambió
                      const confirmacion = confirm(`¿Realmente quiere cambiar el nombre del campo "${textoAnterior}" a "${nuevoNombre}"?`);
                      if (!confirmacion) {
                          th.textContent = textoAnterior; // Restaurar si cancela el cambio
                      } else {
                          th.setAttribute("data-texto-anterior", nuevoNombre); // Actualizar el texto anterior
                       
                      }
                  }
              });
          });
      } */
      
      
      
      
      /* function agregarConfirmacionCeldas() {
          const celdas = document.querySelectorAll("td[contenteditable='true']");
          celdas.forEach(td => {
              // Captura el texto original antes de editar
              td.addEventListener("focus", function() {
                  const textoActual = td.textContent.trim();
                  td.setAttribute("data-texto-anterior", textoActual);
              });
      
              // Mostrar confirmación al perder el foco
              td.addEventListener("blur", function() {
                  const nuevoNombre = td.textContent.trim(); // Capturar el nuevo texto
                  const textoAnterior = td.getAttribute("data-texto-anterior");
      
                  if (nuevoNombre !== textoAnterior) { // Solo confirmar si el texto cambió
                      const confirmacion = confirm(`¿Realmente quiere cambiar el nombre del campo "${textoAnterior}" a "${nuevoNombre}"?`);
                      if (!confirmacion) {
                          td.textContent = textoAnterior; // Restaurar si cancela el cambio
                      } else {
                          td.setAttribute("data-texto-anterior", nuevoNombre); // Actualizar el texto anterior
                        
                      }
                  }
              });
          });
      }
       */
      
      
          function capturarDatosEditados() {
              const table = document.querySelector("table");
          
          
      
                  // Filtrar los encabezados y excluir el "id"
                  const headers = Array.from(table.querySelectorAll("th"))
                      .map(th => th.textContent)
                      .filter(header => header.toLowerCase() !== "id"); // Excluir el encabezado "id"
              
                  const rows = Array.from(table.querySelectorAll("tr")).slice(1); // Omitir fila de encabezados
              
                  const updatedData = rows.map(row => {
                      const cells = Array.from(row.querySelectorAll("td"));
                      const rowObject = {};
                      cells.forEach((cell, index) => {
                          // Solo agregar columnas que no sean "id"
                          if (headers[index] && headers[index].toLowerCase() !== "id") {
                              rowObject[headers[index]] = cell.textContent.trim();
                          }
              
                          // Permitir edición táctil en celdas (opcional)
                          cell.addEventListener("touchstart", (event) => {
                              event.target.contentEditable = true; // Hacer la celda editable al tocar
                          }, { passive: true });
              
                          cell.addEventListener("touchend", (event) => {
                              event.target.contentEditable = false; // Detener edición al soltar
                          }, { passive: true });
                      });
                      return rowObject;
                  });
              
                  return updatedData;
                 
          }
          
      
      
      
      
      
      
      function guardarComoCSV() {
          
          
          const csv = Papa.unparse(resultadoFiltrado); // Convertir JSON a CSV
          const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "datos_editados.csv"; // Nombre del archivo
          link.style.display = "none";
      
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
      
          alert("Archivo CSV guardado exitosamente."); 
         
      }
      
      
      
      
      
      
      
      
      function guardarComoJSON() {
        
        
         
          const blob = new Blob([JSON.stringify(resultadoFiltrado, null, 2)], { type: "application/json" });
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "datos_editados.json"; // Nombre del archivo
          link.style.display = "none";
      
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
      
          alert("Archivo JSON guardado exitosamente."); 
      
        
      }
      
      
      
      
      
      
      let jsonGlobal; // Variable global para almacenar el JSON
      
      
      
      cargarCSVButton.addEventListener("click", function () {
          const fileInput = document.getElementById("csvFile");
          fileInput.click(); // Abre el selector de archivos
      });
      
      // Manejador para cuando se selecciona un archivo
      document.getElementById("csvFile").addEventListener("change", function () {
          inicio(); // Aquí inicias tu flujo completo
      });
      
      
      
      function conectorEditorBuscador(csv) {
          convertidorCsvAJson(csv)
              .then(jsonData => {
                  jsonGlobal = generarIds(jsonData); // Guardar en jsonGlobal
                  document.getElementById("regenerarTablaButton").style.display = "block"; // Mostrar el botón de regeneración
                  inicioBuscador(jsonGlobal);
              })
              .catch(err => {
                  console.error("Error al procesar el archivo:", err.message);
              });
      }
      
      // Botón para mostar tabla
      const mostrarTablaBtn = document.getElementById("regenerarTablaButton");
      
      mostrarTablaBtn.addEventListener("click", function () {
          mostrarTablaBtn.classList.add("visibility-hidden");
        /*   console.log(jsonGlobal); */
          mostrarTablaEditable(jsonGlobal);
      
      });
      
      
      
      // la función "inicio" es disparada desde input de "Cargar archivo CSV"
      
      function inicio(){
         /*  mostrarNombreArchivo(fileInput, fileNameElement); */
          const csv = cargarCSV(fileInput, fileNameElement);
          mostrarTablaBtn.classList.remove("visibility-hidden");
          mapSection.classList.remove("display-none");
          conectorEditorBuscador(csv);
        
          
      }
      
      
      
      
      
      //  PARA ACTUALIZAR EL BUSCADOR CON LOS DATOS EDITADOS DE LA TABLA 
      
      const actualizarBuscadorBtn = document.getElementById("actualizar-buscador-btn");
      
      
      
      
      
      
      // -----------------------   BUSCADOR   --------------------------------
      
      
      
      
      const inputBuscador = document.getElementById("buscador");
      const fileNameDisplay = document.getElementById('file-name');
      const contenedorResultados = document.querySelector("#resultados");
      
      inputBuscador.addEventListener("pointerdown", function(event) {
          const input = event.target;
          if (input.disabled) {
              input.style.opacity="0.4";
              input.value = "";
              input.placeholder = "No hay Campos fijados";
            
              
            event.preventDefault(); // Previene el comportamiento predeterminado.
            event.stopPropagation(); // Evita que el evento se propague.
          }else{
              input.style.opacity="1";
              input.placeholder ="Buscar por términos clave...";
          }
        });
      
      
      
      
      
      // Función para eliminar tildes (normalizar texto). Sirve para normalizar texto ingresado por inputs
      
      function quitarTildes(texto) {
          return texto.normalize("NFD").replace(/[\u0300-\u036f]/g, ""); // Normaliza y elimina diacríticos
      }
      
      
             
           
          let resultadoFiltrado = [];   
      
      function buscar(inputBuscador, dondeBuscar, opciones) {
          inputBuscador.addEventListener("change", ()=>{
              document.getElementById("contenedor-guardar-btns").classList.remove("display-none");
          });
      
          inputBuscador.addEventListener("input", () => {
              if (inputBuscador.value.trim() !== "") {
              inputBuscador.classList.add("buscador-lleno");
              
              } else {
              inputBuscador.classList.remove("buscador-lleno");
              
              inputBuscador.classList.add("buscador-vacio");
              }
      
              // Dividir el texto ingresado en palabras separadas
              const palabrasBusqueda = quitarTildes(inputBuscador.value.trim().toLowerCase())
                                      .split(/\s+/)
                                      .filter(palabra => palabra.length > 0); // Filtrar palabras vacías
      
           resultadoFiltrado = dondeBuscar.filter(item => {
        
            
              let coincidenciasPorItem = []; 
              
             coincidenciasPorItem = opciones.filter(opcion =>{
                let propiedad = item[opcion];
                const opcionLower = quitarTildes(propiedad.toLowerCase());
                // Verificar que todas las palabras coincidan en Description
                const coincide = palabrasBusqueda.every(palabra => opcionLower.includes(palabra));
                
                if (coincide) {
                  // Generar una porción relevante de texto para cada término de búsqueda
                  item[opcion].Highlighted = palabrasBusqueda
                  .map(palabra => extractContext(opcionLower, palabra, propiedad))
                  .join("...");
      
                  return true;
              }
               
          });
      
      
          if(coincidenciasPorItem.length >0){
            return true;
          }
      
      
        });
                     
              imprimirResultados(resultadoFiltrado, opciones);
          });
      }
      
      
      
      
      
      function extractContext(texto, busqueda, originalTexto) {
          // Encontrar la posición del término en el texto y extraer el contexto
          const index = texto.indexOf(busqueda);
          if (index === -1) return ""; // Retornar vacío si no hay coincidencia
          const contextLength = 20; // Cantidad de caracteres alrededor del término
          const start = Math.max(0, index - contextLength);
          const end = Math.min(texto.length, index + busqueda.length + contextLength);
          return originalTexto.substring(start, end); // Extraer texto original alrededor de la coincidencia
      }
      
      
      
      
      
      function resaltarTexto(texto, busqueda) {
          if (!busqueda || busqueda.trim().length === 0) return texto; // Retorna el texto sin cambios si no hay búsqueda
      
          // Dividir el término de búsqueda en palabras separadas
          const palabras = quitarTildes(busqueda.trim().toLowerCase()).split(/\s+/).filter(palabra => palabra.length > 0);
      
          // Escapar caracteres especiales en las palabras
          const escaparRegex = palabra => palabra.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      
          // Crear una expresión regular incluyendo todas las palabras
          const regex = new RegExp(`(${palabras.map(escaparRegex).join("|")})`, "gi");
      
          // Reemplazar todas las coincidencias en el texto con la etiqueta <mark>
          return texto.replace(regex, "<mark>$1</mark>");
      }
                
      
      
      
      
      
      
      
      
      function imprimirResultados(resultadoFiltrado, opciones) {
              contenedorResultados.innerHTML = ""; // Limpiar el contenedor
      
              contenedorResultados.classList.add("bg-display");
      
              resultadoFiltrado.forEach(item => {
        
                   opciones.forEach(opcion =>{ 
                      const h3 =document.createElement("h3");
                      h3.innerHTML = resaltarTexto(item[opcion].Highlighted || item[opcion], inputBuscador.value);
                      h3.classList.add("vistaResultado");
                      contenedorResultados.appendChild(h3); 
      
                    
                   }); 
                   const hr =document.createElement("hr");
                               
                   contenedorResultados.appendChild(hr);
      
                
          });
      }
      
      
      
      
      
      function extractFields(data) {
          let fields = [];
          if (Array.isArray(data)) {
            // Si es un array, obtiene los campos del primer objeto
            fields = Object.keys(data[0] || {});
          } else if (typeof data === "object") {
            // Si es un objeto, obtiene las claves directamente
            fields = Object.keys(data);
          }
          return fields;
        }
      
        
        const fieldsContainer = document.getElementById("fieldsContainer");
        const button = document.getElementById("fijarCampos"); // Crear botón
      
        function displayFields(fields, userJSON) {
          
           fieldsContainer.innerHTML = ""; 
         
      
          fields.forEach(field => {
              const label = document.createElement("label");
              const checkbox = document.createElement("input");
      
              checkbox.type = "checkbox";
              checkbox.value = field;
              label.appendChild(checkbox);
              label.appendChild(document.createTextNode(field));
              fieldsContainer.appendChild(label);
              fieldsContainer.appendChild(document.createElement("br"));
              label.classList.add("opciones-check");
      
         
              // Escuchar cambios en los checkboxes
              checkbox.addEventListener("change", () => {
                  // Verificar si al menos un checkbox está marcado
                  const anyChecked = Array.from(fieldsContainer.querySelectorAll("input[type='checkbox']"))
                                          .some(input => input.checked);
                  button.style.visibility = anyChecked ? "visible" : "hidden"; // Mostrar u ocultar botón
                  inputBuscador.disabled = anyChecked;
      
                      // Acción específica para cuando un checkbox se desmarca
                  if (!checkbox.checked) {
                     inputBuscador.disabled = true;
                     button.innerHTML=`Fijar Campos`;
                     button.classList.add("animationBtn"); 

                  }
              });
          });
      
          fieldsContainer.appendChild(button);
          
      
          // Asociar el evento click al botón
          button.addEventListener("click", () => {
             button.classList.remove("animationBtn"); 
             fijarCampos(userJSON);
          });
      }
      
      
      
      
      
      
      function fijarCampos(userJSON){
      
        /*   inputBuscador.scrollIntoView({ behavior: 'smooth' }); */
      
          button.innerHTML =`Campos fijados`;
          let opciones = capturarSeleccionados();
          
          if(opciones.length > 0){
               inputBuscador.style.opacity="1";
              inputBuscador.disabled = false; 
              inputBuscador.placeholder ="Buscar por términos clave..."; 
      
              buscar(inputBuscador, userJSON, opciones);
          }/* else{
          alert("no se fijó ningún campo");
          }
           */
      
          fieldsContainer.addEventListener("change", (e)=>{
              if(e.target.checked){
                  button.classList.add("animationBtn");
                  button.innerHTML =`Fijar campos`;
          }else{
              inputBuscador.style.opacity="1";
              inputBuscador.disabled = true; 
              inputBuscador.placeholder ="Seleccionar Campos";
          }
      });
      }
      
      
      
      
        function inicioBuscador(userJSON){
          
           //  EXTRAEMOS LOS CAMPOS DEL JSON
           const fields = extractFields(userJSON);
           //  MOSTRAMOS LA LISTA DE CAMPOS DISPONIBLES PARA BÚSQUEDAS FUTURAS
           displayFields(fields, userJSON);
      
          
        }
      
      
      
      
      
      
      function capturarSeleccionados() {
        const seleccionados = document.querySelectorAll("#fieldsContainer input[type='checkbox']:checked");
        const valoresSeleccionados = Array.from(seleccionados).map(checkbox => checkbox.value);
      
      
        return valoresSeleccionados;
        
      }
      
      
      
      // Añadir el manejador de eventos `wheel` con la opción pasiva para evitar el error de rendimiento
      document.addEventListener("wheel", function(e) {
      // Tu código aquí, si es necesario
      }, { passive: true });
      
      
      
    </script>


</body>
</html>
